# TranslateDigest

[‰∏≠Êñá](#‰∏≠Êñá) | [English](#english)

---

## ‰∏≠Êñá

## üìã Êõ¥Êñ∞Êó•Âøó

### 2025-12-04

**‚ú® ÂäüËÉΩÊîπËøõ**

- ‰øÆÂ§çÈÖçÁΩÆ‰øùÂ≠òÈóÆÈ¢òÔºàÁßªÈô§ initializeDefaultConfig ÂØºËá¥ÁöÑÂÜ≤Á™ÅÔºâ
- ÊîπËøõÊëòË¶ÅÊúçÂä°ÁöÑ Fallback Á≠ñÁï•ÔºàÊîØÊåÅÂ§öÁ∫ßÂÖúÂ∫ïÔºâ
- Â¢ûÂº∫ Google Provider ÁöÑÊëòË¶ÅËÉΩÂäõÔºàÊô∫ËÉΩÂú®Âè•Êú´Êà™Êñ≠Ôºâ
- ‰ºòÂåñ API Key È™åËØÅÊó•ÂøóÔºàÊòæÁ§∫ÂÖ∑‰ΩìÈ™åËØÅÁªìÊûúÔºâ

**üîß ÊäÄÊúØ‰ºòÂåñ**

- Ê∑ªÂä†ÈîôËØØÂàÜÁ±ªÊú∫Âà∂ÔºàÈÅøÂÖçÊµ™Ë¥π Token ÈáçËØïÊ∞∏‰πÖÊÄßÈîôËØØÔºâ
- ÂÆûÁé∞ÂÆåÊï¥ÁöÑ Fallback ÈìæÔºàÁøªËØëÂíåÊëòË¶ÅÈÉΩÊúâÂÖúÂ∫ïÊñπÊ°àÔºâ
- ÊîπËøõ TextUtil ÊñáÊú¨Â§ÑÁêÜÔºàHTML ÂÆû‰ΩìËß£Á†Å„ÄÅÊ†áÁÇπÁ©∫Ê†º‰øÆÂ§çÔºâ

### üìñ ÁÆÄ‰ªã

**TranslateDigest** ÊòØ‰∏Ä‰∏™ÂäüËÉΩÂº∫Â§ßÁöÑ FreshRSS Êâ©Â±ïÊèí‰ª∂ÔºåÊó®Âú®ÈÄöËøá AI ÊäÄÊúØÊèêÂçáÊÇ®ÁöÑ RSS ÈòÖËØª‰ΩìÈ™å„ÄÇÂÆÉËÉΩÂ§üËá™Âä®ÁøªËØëËÆ¢ÈòÖÊ∫êÁöÑÊñáÁ´†Ê†áÈ¢ò‰ª•ÂèäÁîüÊàêÊëòË¶Å

### ‚ú® Ê†∏ÂøÉÂäüËÉΩ

- **üåç Â§öËØ≠Ë®ÄÊ†áÈ¢òÁøªËØë**  
  ÊîØÊåÅËá™Âä®ÁøªËØëÊñáÁ´†Ê†áÈ¢ò‰∏∫‰∏≠Êñá„ÄÅËã±Êñá„ÄÅÊó•Êñá„ÄÅÊ≥ïÊñáÊàñÂæ∑Êñá

- **ü§ñ AI Êô∫ËÉΩÊëòË¶Å**  
  ÈõÜÊàê DeepSeek„ÄÅÈÄö‰πâÂçÉÈóÆÔºàQwenÔºâ‰ª•Âèä Gemini ÂØπÊñáÁ´†ËøõË°åÊëòË¶ÅÔºàÊäìÂèñÂÜÖÂÆπ‰∏çÂÖ®Èù¢‰ªÖ‰ΩúÈÄüËßà‰ΩøÁî®Ôºâ

- **‚öôÔ∏è ÁÅµÊ¥ªÁöÑËÆ¢ÈòÖÊ∫êÁÆ°ÁêÜ**  
  ÊîØÊåÅÊåâËÆ¢ÈòÖÊ∫êÁ≤íÂ∫¶ÊéßÂà∂ÔºåÂèØ‰∏∫ÁâπÂÆö Feed ÂçïÁã¨ÂºÄÂêØÁøªËØëÊàñÊëòË¶ÅÂäüËÉΩ

- **üîå Â§öÊúçÂä°Êèê‰æõÂïÜÊîØÊåÅ**

  - **Google ÁøªËØë**ÔºöÂÖçË¥π„ÄÅÂø´ÈÄüÔºåÈÄÇÁî®‰∫éÂü∫Á°ÄÊ†áÈ¢òÁøªËØë
  - **DeepSeek**ÔºöÂº∫Â§ßÁöÑ AI Ê®°ÂûãÔºåÊîØÊåÅÁøªËØëÂíåÊëòË¶Å
  - **ÈÄö‰πâÂçÉÈóÆ**ÔºöÈòøÈáå‰∫ë AI ÊúçÂä°ÔºåÊîØÊåÅÁøªËØëÂíåÊëòË¶Å
  - **Google Gemini**ÔºöGoogle ÊúÄÊñ∞ AI Ê®°ÂûãÔºåÊîØÊåÅÁøªËØëÂíåÊëòË¶ÅÔºàÂÖçË¥πÔºâ

- **üõ°Ô∏è Êô∫ËÉΩÂÆπÈîôÊú∫Âà∂**
  - API Â§±Ë¥•Ëá™Âä® Fallback Âà∞ Google ÊúçÂä°
  - ÊëòË¶ÅÂäüËÉΩÊ∞∏‰∏çÂ§±Ë¥•ÔºàÂ§öÁ∫ßÂÖúÂ∫ïÁ≠ñÁï•Ôºâ
  - Êô∫ËÉΩÈîôËØØÂàÜÁ±ªÔºåÈÅøÂÖçÊµ™Ë¥π TokenÔºàÊ∞∏‰πÖÊÄßÈîôËØØ‰∏çÈáçËØïÔºâ

### üì¶ ÂÆâË£Ö

1. **‰∏ãËΩΩÊèí‰ª∂**

   - ‰∏ãËΩΩ TranslateDigest Êñá‰ª∂Â§π
   - ÁßªÂä®ËØ•Êñá‰ª∂Â§πÂà∞/FreshRSS/extensions Êñá‰ª∂Â§π

2. **ÂêØÁî®Êèí‰ª∂**
   - ÁôªÂΩï FreshRSS
   - ËøõÂÖ• ËÆæÁΩÆ ‚Üí Êâ©Â±ï
   - ÊâæÂà∞ TranslateDigest Âπ∂ÁÇπÂáªÂêØÁî®

### ‚öôÔ∏è ÈÖçÁΩÆ

Âú® FreshRSS Êâ©Â±ïÁÆ°ÁêÜÈ°µÈù¢ÊâæÂà∞ TranslateDigest Âπ∂ÁÇπÂáªÈÖçÁΩÆ„ÄÇ

#### 1Ô∏è‚É£ ÈÄâÊã©ÁøªËØëÊúçÂä°

- **Google ÁøªËØë**ÔºàÈªòËÆ§Ôºâ

  - Êó†ÈúÄ API Key
  - ‰ªÖÊîØÊåÅÊ†áÈ¢òÁøªËØë
  - ÂÆåÂÖ®ÂÖçË¥π

- **DeepSeek / ÈÄö‰πâÂçÉÈóÆ / Gemini**Ôºà‰ΩøÁî®ÊëòË¶ÅÂäüËÉΩÊó∂ËØ∑Ê≥®ÊÑè token Ê∂àËÄóÔºâ
  - ÈúÄË¶ÅÁî≥ËØ∑Âπ∂Â°´ÂÜô API Key
  - ÊîØÊåÅÊ†áÈ¢òÁøªËØëÂíåÂÜÖÂÆπÊëòË¶Å
  - ÊîØÊåÅËá™ÂÆö‰πâÊ®°ÂûãÔºàÂ¶Ç `deepseek-chat`, `qwen-plus`, `gemini-2.0-flash-exp`Ôºâ

#### 2Ô∏è‚É£ ÈÄöÁî®ËÆæÁΩÆ

| ÈÄâÈ°π           | ËØ¥Êòé                                       |
| -------------- | ------------------------------------------ |
| **ÁõÆÊ†áËØ≠Ë®Ä**   | ÈÄâÊã©ÁøªËØëÁõÆÊ†áËØ≠Ë®ÄÔºàÈªòËÆ§Ôºö‰∏≠ÊñáÔºâ             |
| **ÂêåËØ≠Ë®ÄË∑≥Ëøá** | Ëá™Âä®Ê£ÄÊµãÂπ∂Ë∑≥ËøáÂ∑≤ÊòØÁõÆÊ†áËØ≠Ë®ÄÁöÑÊñáÁ´†ÔºåËäÇÁúÅËµÑÊ∫ê |
| **ÊúÄÂ§ßÂ≠óÁ¨¶Êï∞** | ÈôêÂà∂ÂèëÈÄÅÁªô AI ÁöÑÊñáÊú¨ÈïøÂ∫¶ÔºàÂª∫ËÆÆ 3000-5000Ôºâ |

#### 3Ô∏è‚É£ ËÆ¢ÈòÖÊ∫êËÆæÁΩÆ

Âú®ÈÖçÁΩÆÈ°µÈù¢Â∫ïÈÉ®ÁöÑËÆ¢ÈòÖÊ∫êÂàóË°®‰∏≠Ôºö

- ‚úÖ **ÁøªËØëÊ†áÈ¢ò**ÔºöÂãæÈÄâÂêéËá™Âä®ÁøªËØëËØ•ËÆ¢ÈòÖÊ∫êÁöÑÊ†áÈ¢ò
- ‚úÖ **ÁîüÊàêÊëòË¶Å**ÔºöÂãæÈÄâÂêé‰∏∫ÊñáÁ´†ÁîüÊàê AI ÊëòË¶Å

> üí° **ÊèêÁ§∫**ÔºöÂª∫ËÆÆ‰ªÖÂØπÈáçË¶ÅÁöÑÊàñÂ§ñËØ≠ËÆ¢ÈòÖÊ∫êÂºÄÂêØÔºå‰ª•ËäÇÁúÅ API Ë∞ÉÁî®
> ‚ö†Ô∏è **Ë≠¶Âëä**ÔºöÊÖéÁî®ÂÜÖÂÆπÊëòË¶ÅÂäüËÉΩÔºåËØ•ÂäüËÉΩ‰ºöÊ∂àËÄóÂ§ßÈáè TokenÔºåÂèØËÉΩ‰∫ßÁîüËæÉÈ´òÁöÑ API Ë∞ÉÁî®Ë¥πÁî®„ÄÇ

### üöÄ ‰ΩøÁî®

ÈÖçÁΩÆÂÆåÊàêÂêéÔºåÊèí‰ª∂‰ºöËá™Âä®ËøêË°åÔºö

1. FreshRSS ÊäìÂèñÊñ∞ÊñáÁ´†Êó∂ÔºåÊèí‰ª∂Ëá™Âä®Â§ÑÁêÜ
2. Âú®ÊñáÁ´†ÂàóË°®Êü•ÁúãÁøªËØëÂêéÁöÑÊ†áÈ¢ò
3. ÊâìÂºÄÊñáÁ´†ËØ¶ÊÉÖÊü•Áúã AI ÁîüÊàêÁöÑÊëòË¶ÅÔºàÊòæÁ§∫Âú®ÊñáÁ´†ÂºÄÂ§¥Ôºâ

### üîç ËØäÊñ≠Êó•Âøó

#### ‰ΩøÁî® docker compose ÂëΩ‰ª§Êü•ÁúãÂä®ÊÄÅÊó•Âøó

```
docker compose logs -f
```

ÈÖçÁΩÆÈ°µÈù¢Êèê‰æõËØ¶ÁªÜÁöÑËØäÊñ≠‰ø°ÊÅØÂ∏ÆÂä©ÊéíÊü•ÈóÆÈ¢òÔºö

#### API Key Áä∂ÊÄÅÈ™åËØÅ

- **‰øùÂ≠òÈÖçÁΩÆÊó∂**ÔºöËá™Âä®È™åËØÅÊØè‰∏™ API Key ÁöÑÊúâÊïàÊÄß
- **È™åËØÅÁªìÊûúÊòæÁ§∫**Ôºö
  - ‚úì VALIDÔºöKey ÊúâÊïàÔºåÂèØÊ≠£Â∏∏‰ΩøÁî®
  - ‚úó INVALIDÔºöKey Ê†ºÂºèÈîôËØØÊàñÂ∑≤ËøáÊúüÔºåÊòæÁ§∫ÂÖ∑‰ΩìÈîôËØØ‰ø°ÊÅØ
  - ‚úó ERRORÔºöÈ™åËØÅËøáÁ®ã‰∏≠ÂèëÁîüÂºÇÂ∏∏ÔºåÊòæÁ§∫ÈîôËØØËØ¶ÊÉÖ
  - EMPTYÔºöÊú™ËÆæÁΩÆ API Key
  - SKIPPEDÔºöÊèê‰æõÁöÑ Key ‰∏∫Á©∫

#### Êô∫ËÉΩÂÆπÈîô‰ø°ÊÅØ

- **ÁøªËØëÂá∫ÈîôËá™Âä® Fallback**ÔºöÂΩìÈ¶ñÈÄâÊúçÂä°Â§±Ë¥•Êó∂ÔºåËá™Âä®Â∞ùËØï Google ÁøªËØë
- **ÊëòË¶ÅÂ§öÁ∫ßÂÖúÂ∫ï**Ôºö
  1. Â∞ùËØïÈ¶ñÈÄâÊúçÂä°ÔºàDeepSeek/Qwen/GeminiÔºâ
  2. Â§±Ë¥• ‚Üí Â∞ùËØï Google Êô∫ËÉΩÊà™Êñ≠
  3. ‰ªçÂ§±Ë¥• ‚Üí ÊúÄÁªàÁÆÄÂçïÊà™Êñ≠Ôºà‰øùËØÅÊëòË¶ÅÂèØÁî®Ôºâ

### ‚ö†Ô∏è Ê≥®ÊÑè‰∫ãÈ°π

- **API ÊàêÊú¨**ÔºöAI Ë∞ÉÁî®‰ºö‰∫ßÁîüË∞ÉÁî®Ë¥πÁî®ÔºåËØ∑Êü•ÁúãÂØπÂ∫îÊúçÂä°ÂïÜÁöÑË¥πÁéá
- **Â§ÑÁêÜÊó∂Èó¥**ÔºöAI ÊëòË¶ÅÂäüËÉΩ‰ºöÂ¢ûÂä†Â∞ëÈáèÊäìÂèñÊó∂Èó¥
- **‰æùËµñÁéØÂ¢É**ÔºöÈúÄË¶Å PHP mbstring Êâ©Â±ïÔºà‰∏ÄËà¨Â∑≤ÈªòËÆ§ÂÆâË£ÖÔºâ

### üôè Ëá¥Ë∞¢

Êú¨È°πÁõÆÂèóÂà∞ [FreshRSS-TranslateTitlesCN](https://github.com/jacob2826/FreshRSS-TranslateTitlesCN) ÁöÑÂêØÂèëÔºåÊÑüË∞¢ [@jacob2826](https://github.com/jacob2826)

### üìù ËÆ∏ÂèØËØÅ

[MIT License](https://opensource.org/license/mit)

---

## English

## üìã Changelog

### 2025-12-04

**‚ú® Feature Improvements**

- Fix configuration saving issue (removed initializeDefaultConfig conflict)
- Enhanced summary service fallback strategy (supports multi-level fallback)
- Improved Google Provider summary capability (intelligent truncation at sentence end)
- Optimized API Key validation logs (show specific validation results)

**üîß Technical Optimizations**

- Added error classification mechanism (avoid wasting tokens retrying permanent errors)
- Implemented complete fallback chain (both translation and summary have fallback solutions)
- Improved TextUtil text processing (HTML entity decoding, punctuation space repair)

### üìñ Introduction

**TranslateDigest** is a powerful FreshRSS extension designed to enhance your RSS reading experience through AI technology. It can automatically translate article titles and generate summaries.

### ‚ú® Key Features

- **üåç Multi-language Title Translation**  
  Automatically translate article titles to Chinese, English, Japanese, French, or German

- **ü§ñ AI-Powered Summaries**  
  Integrates DeepSeek, Qwen, and Gemini to summarize articles (crawled content may be incomplete, for quick overview only)

- **‚öôÔ∏è Flexible Feed Management**  
  Granular control per feed - enable translation or summarization for specific feeds

- **üîå Multiple Service Providers**

  - **Google Translate**: Free, fast, suitable for basic title translation
  - **DeepSeek**: Powerful AI model supporting both translation and summarization
  - **Qwen (Tongyi Qianwen)**: Alibaba Cloud AI service with translation and summary capabilities
  - **Google Gemini**: Google's latest AI model with translation and summary features (Free)

- **üõ°Ô∏è Intelligent Fault Tolerance**
  - Automatic Fallback to Google service on API failure
  - Summarization never fails (multi-level fallback strategy)
  - Smart error classification to avoid wasting tokens (permanent errors not retried)

### üì¶ Installation

1. **Download the Extension**

   - Download the TranslateDigest folder
   - Move the folder to `/FreshRSS/extensions` folder

2. **Enable the Extension**
   - Log into FreshRSS
   - Navigate to Settings ‚Üí Extensions
   - Find TranslateDigest and enable it

### ‚öôÔ∏è Configuration

Go to the FreshRSS extension management page and click configure for TranslateDigest.

#### 1Ô∏è‚É£ Choose Translation Service

- **Google Translate** (Default)

  - No API Key required
  - Title translation only
  - Completely free

- **DeepSeek / Qwen / Gemini** (Please note token consumption when using summary function)
  - Requires API Key
  - Supports both translation and summarization
  - Customizable models (e.g., `deepseek-chat`, `qwen-plus`, `gemini-2.0-flash-exp`)

#### 2Ô∏è‚É£ General Settings

| Option                 | Description                                              |
| ---------------------- | -------------------------------------------------------- |
| **Target Language**    | Choose translation target language (default: Chinese)    |
| **Skip Same Language** | Auto-detect and skip articles already in target language |
| **Max Characters**     | Limit text length sent to AI (recommended: 3000-5000)    |

#### 3Ô∏è‚É£ Feed Settings

In the feed list at the bottom of the configuration page:

- ‚úÖ **Translate Title**: Auto-translate titles for this feed
- ‚úÖ **Generate Summary**: Generate AI summaries for articles

> üí° **Tip**: Enable only for important or foreign-language feeds to save API calls
> ‚ö†Ô∏è **Warning**: Use the content summary feature with caution as it consumes a large number of tokens and may result in high API call costs.

### üöÄ Usage

After configuration, the extension runs automatically:

1. When FreshRSS fetches new articles, the plugin processes them
2. View translated titles in the article list
3. Open article details to see AI-generated summaries (displayed at the beginning)

### üîç Diagnostic Logs

#### View Real-time Logs with Docker Compose Command

```
docker compose logs -f
```

The configuration page provides detailed diagnostic information to troubleshoot issues:

#### API Key Status Verification

- **On Configuration Save**: Automatically validate each API Key
- **Validation Result Display**:
  - ‚úì VALID: Key is valid and ready to use
  - ‚úó INVALID: Key format error or expired, with specific error message
  - ‚úó ERROR: Exception during validation, with error details
  - EMPTY: API Key not set
  - SKIPPED: Provided Key is empty

#### Intelligent Fault Tolerance Information

- **Translation Error Auto-Fallback**: When primary service fails, automatically try Google Translate
- **Multi-level Summarization Fallback**:
  1. Try primary service (DeepSeek/Qwen/Gemini)
  2. Failure ‚Üí Try Google intelligent truncation
  3. Still failure ‚Üí Final simple truncation (ensure summary availability)

### ‚ö†Ô∏è Notes

- **API Costs**: DeepSeek and Qwen services incur usage fees - check provider pricing
- **Processing Time**: AI summary feature adds slight delay to feed fetching
- **Requirements**: Requires PHP mbstring extension (usually pre-installed)

### üôè Acknowledgments

This project is inspired by [FreshRSS-TranslateTitlesCN](https://github.com/jacob2826/FreshRSS-TranslateTitlesCN). Thanks to [@jacob2826](https://github.com/jacob2826)

### üìù License

[MIT License](https://opensource.org/license/mit)

For issues or suggestions, please submit an [Issue](https://github.com/fishyo/TranslateDigest/issues)
